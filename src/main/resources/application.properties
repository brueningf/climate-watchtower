spring.application.name=ClimateWatchman

# Set a fixed dev username/password for local dev only
spring.security.user.name=admin
spring.security.user.password=password

# RabbitMQ connection settings (override with SPRING_RABBITMQ_* env vars)
spring.rabbitmq.host=${SPRING_RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${SPRING_RABBITMQ_PORT:5672}
spring.rabbitmq.username=${SPRING_RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${SPRING_RABBITMQ_PASSWORD:guest}

# Primary datasource (use Timescale/Postgres for the audit ledger by default in local dev)
# Override with SPRING_DATASOURCE_* env vars if you want to point to MySQL instead.
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/watchman_audit}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}
# Postgres driver and JPA defaults for Timescale/Postgres
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=${SPRING_HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}

# Flyway
# Disable Flyway auto-migration in dev when the Timescale/Postgres product string is not recognized by the Flyway version in the classpath.
# The docker init script (docker/init-timescale/00_init.sql) will initialize the DB in local development.
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration

# Seeder defaults (used by RabbitSeedRunner when SPRING_PROFILES_ACTIVE=seed)
# exchange empty = use default exchange (routing key is the queue name)
app.rabbit.seed.exchange=${APP_RABBIT_SEED_EXCHANGE:}
app.rabbit.seed.routing-key=${APP_RABBIT_SEED_ROUTING_KEY:test.queue}
app.rabbit.seed.count=${APP_RABBIT_SEED_COUNT:100}

# Seeder mode: 'once' or 'continuous'
app.rabbit.seed.mode=${APP_RABBIT_SEED_MODE:continuous}
app.rabbit.seed.interval-ms=${APP_RABBIT_SEED_INTERVAL_MS:1000}
# Comma-separated list of module names for the seeder (default includes the user's example)
app.rabbit.seed.modules=${APP_RABBIT_SEED_MODULES:green-medium}
